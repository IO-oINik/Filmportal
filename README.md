# FilmPortal

FilmPortal — это агрегатор фильмов с возможностью регистрации пользователей, разделением ролей (администратор/пользователь) и выставлением оценок фильмам.
<br>
## Микросервисы
- User Service
- Film Service
- Review Service
- Config Service
- Eureka Service
- Gateway Service
- Parser Service

### User Service
Содержит основную логику работы с пользователями, а также используется для аутентификации и авторизации пользователей

#### Логика работы с пользователем
| Метод  | Путь                     | Описание                     |
|--------|--------------------------|------------------------------|
| GET    | /api/v1/user/all         | Получение всех пользователей |
| GET    | /api/v1/user/me          | Получение информации о себе  |
| GET    | /api/v1/user/{id}        | Получение пользователя по id |
| POST   | /api/v1/user/{id}/edit   | Изменения пользователя по id |
| DELETE | /api/v1/user/{id}/delete | Удаление пользователя по id  |

#### Логика аутентификации и авторизации
| Метод | Путь                       | Описание                                     |
|-------|----------------------------|----------------------------------------------|
| GET   | /api/v1/auth/refresh-token | Обновление access и refresh токенов          |
| GET   | /api/v1/auth/logout        | Выход из системы (инвалидация refresh token) |
| POST  | /api/v1/auth/register      | Регистрация нового пользователя              |
| POST  | /api/v1/auth/login         | Вход в систему (получение токенов)           |

### Film Service
Содержит основную логику работы с фильмами


#### Логика работы с фильмами
| Метод  | Путь                     | Описание                                                                          |
|--------|--------------------------|-----------------------------------------------------------------------------------|
| GET    | /api/v1/film/all         | Постраничный вывод информации о фильмах. Также принимает параметры для сортировки |
| GET    | /api/v1/film/{id}        | Получение фильма по id                                                            |
| POST   | /api/v1/film/{id}/edit   | Изменения фильма по id                                                            |
| DELETE | /api/v1/film/{id}/delete | Удаление фильма по id                                                             |

#### Логика работы с персонами
| Метод  | Путь                        | Описание                                                       |
|--------|-----------------------------|----------------------------------------------------------------|
| GET    | /api/v1/person/all          | Вывод всех персон                                              |
| GET    | /api/v1/person/{id}         | Получение персоны по id                                        |
| GET    | /api/v1/person/{id}/careers | Получение всех ролей персоны (актёр, продюсер, режиссер и т.д. |
| POST   | /api/v1/person/{id}/edit    | Изменения персоны по id                                        |
| DELETE | /api/v1/person/{id}/delete  | Удаление персоны по id                                         |

#### Логика работы с парсером
| Метод  | Путь                                      | Описание                                        |
|--------|-------------------------------------------|-------------------------------------------------|
| POST   | /api/v1/parse-info-film/okko              | Передаём url для парсинга фильма с сервиса okko |
| GET    | /api/v1/parse-info-film/result/all        | Получение всех спарсенных фильмов               |
| GET    | /api/v1/parse-info-film/find?id={}        | Получение конкретного фильма                    |
| GET    | /api/v1/parse-info-film/result/save?id={} | Сохранение фильма                               |

#### Другие сущности
Также реализовна работа с другими сущностями
- Страна
- Жанр
- Возрастное ограничение

### Review Service
Реализована логика работы с оценками фильмов (планируется добавить отзывы к фильмам от зарегистрированных пользователей)

#### Логика работы с оценками фильмов
| Метод  | Путь                            | Описание                           |
|--------|---------------------------------|------------------------------------|
| GET    | /api/v1/film-score/all          | Вывод всех оценок                  |
| GET    | /api/v1/film-score/{id}         | Получение оценки по id             |
| GET    | /api/v1/film-score/find?filmId= | Получение всех оценок по id фильма |
| POST   | /api/v1/film-score/{id}/average | Средняя оценка фильма              |
| DELETE | /api/v1/film-score/{id}/delete  | Удаление оценки по id              |

### Parser Service
Реализован парсинг фильмов (на данный момент с сервиса okko)
Связан с сервисом фильмов через кафку


## Стэк
- Spring Boot
- Spring Jpa
- Spring Security
- Spring Cloud Configuration
- Spring Cloud Gateway
- Spring Cloud OpenFeign
- Eureka
- PostgreSql
- JWT
- SpringDoc
- Kafka